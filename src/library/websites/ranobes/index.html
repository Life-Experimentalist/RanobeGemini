<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Ranobes - Novel Library</title>
		<link rel="stylesheet" href="../shelf-page.css" />
		<link rel="stylesheet" href="./style.css" />
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="../../../icons/icon.png"
		/>
	</head>
	<body class="ranobes-page">
		<div class="shelf-page-container">
			<!-- Page Header -->
			<header class="shelf-page-header">
				<div class="shelf-page-title">
					<span
						class="shelf-page-color-bar"
						id="color-bar"
						style="background: #4a7c4e"
					></span>
					<img
						src="https://ranobes.top/templates/Dark/images/favicon.ico?v=2"
						alt="Ranobes"
						class="shelf-page-icon-img"
						id="page-icon-img"
					/>
					<span
						class="shelf-page-icon"
						id="page-icon"
						style="display: none"
						>ğŸƒ</span
					>
					<h1 id="page-title">Ranobes</h1>
					<span class="novel-count" id="novel-count">(0 novels)</span>
				</div>
				<a href="../../library.html" class="back-link">
					â† Back to Library
				</a>
			</header>

			<!-- Analytics Section -->
			<div class="analytics-section" id="analytics-section">
				<div class="analytics-grid">
					<!-- Stats Summary -->
					<div class="stats-summary">
						<div class="stat-card">
							<span class="stat-value" id="stats-novels">0</span>
							<span class="stat-label">Novels</span>
						</div>
						<div class="stat-card">
							<span class="stat-value" id="stats-enhanced"
								>0</span
							>
							<span class="stat-label">Enhanced Chapters</span>
						</div>
						<div class="stat-card">
							<span class="stat-value" id="stats-words">0</span>
							<span class="stat-label">Total Words</span>
						</div>
						<div class="stat-card">
							<span class="stat-value" id="stats-completed"
								>0</span
							>
							<span class="stat-label">Completed</span>
						</div>
						<div class="stat-card">
							<span class="stat-value" id="stats-ongoing"
								>0</span
							>
							<span class="stat-label">Ongoing</span>
						</div>
						<div class="stat-card">
							<span class="stat-value" id="stats-translating"
								>0</span
							>
							<span class="stat-label">Translating</span>
						</div>
						<div class="stat-card">
							<span class="stat-value" id="stats-avglength"
								>-</span
							>
							<span class="stat-label">Avg Chapters</span>
						</div>
						<div class="stat-card">
							<span class="stat-value" id="stats-reading"
								>0%</span
							>
							<span class="stat-label">Reading</span>
						</div>
					</div>

					<!-- Detail Analytics -->
					<div class="detail-analytics">
						<h3>Library Insights</h3>
						<div class="analytics-items">
							<div class="analytics-item">
								<span class="analytics-icon">â­</span>
								<div class="analytics-detail">
									<span class="analytics-label"
										>Highest Rated</span
									>
									<span
										class="analytics-value"
										id="highest-rated"
										>-</span
									>
								</div>
							</div>
							<div class="analytics-item">
								<span class="analytics-icon">ğŸ“ˆ</span>
								<div class="analytics-detail">
									<span class="analytics-label"
										>Most Popular</span
									>
									<span
										class="analytics-value"
										id="most-popular"
										>-</span
									>
								</div>
							</div>
							<div class="analytics-item">
								<span class="analytics-icon">ğŸŒ</span>
								<div class="analytics-detail">
									<span class="analytics-label"
										>Languages</span
									>
									<span
										class="analytics-value"
										id="language-count"
										>-</span
									>
								</div>
							</div>
							<div class="analytics-item">
								<span class="analytics-icon">ğŸ“</span>
								<div class="analytics-detail">
									<span class="analytics-label">Longest Novel</span>
									<span class="analytics-value" id="longest-novel">-</span>
								</div>
							</div>
							<div class="analytics-item">
								<span class="analytics-icon">ğŸ†•</span>
								<div class="analytics-detail">
									<span class="analytics-label">Newest Addition</span>
									<span class="analytics-value" id="newest-addition">-</span>
								</div>
							</div>
							<div class="analytics-item">
								<span class="analytics-icon">ğŸ“š</span>
								<div class="analytics-detail">
									<span class="analytics-label">Most Chapters</span>
									<span class="analytics-value" id="most-chapters">-</span>
								</div>
							</div>
						</div>
						<div class="analytics-chart" id="status-chart-card">
							<div class="chart-header">
								<h4>Reading Status Mix</h4>
								<span
									class="chart-summary"
									id="status-chart-summary"
									>-</span
								>
							</div>
							<div
								class="bar-chart"
								id="reading-status-chart"
							></div>
							<div
								class="bar-chart-legend"
								id="reading-status-legend"
							></div>
						</div>
					</div>
				</div>
			</div>

			<!-- Filters Section - Compact Design -->
			<div class="filters-section">
				<div class="filter-dropdown-container">
					<button class="filter-toggle-btn" id="filter-toggle-btn">
						âš™ï¸ Filters
						<span
							class="filter-badge"
							id="filter-badge"
							style="display: none"
							>âœ“</span
						>
					</button>
					<div class="active-filters" id="active-filters"></div>

					<div
						class="filter-dropdown"
						id="filter-dropdown"
						style="display: none"
					>
						<div class="filter-grid">
							<div class="filter-item">
								<label for="sort-select">Sort by:</label>
								<select id="sort-select">
									<option value="recent">
										Recently Read
									</option>
									<option value="added">Date Added</option>
									<option value="title">Title</option>
									<option value="chapters">
										Enhanced Chapters
									</option>
									<option value="words">Word Count</option>
									<option value="rating">Rating</option>
									<option value="published">
										Published Date
									</option>
									<option value="updated">
										Updated Date
									</option>
									<option value="status">Work Status</option>
								</select>
							</div>

							<div class="filter-item">
								<label for="work-status-filter"
									>Work Status:</label
								>
								<select id="work-status-filter">
									<option value="all">All</option>
									<option value="Completed">Completed</option>
									<option value="Ongoing">Ongoing</option>
									<option value="Hiatus">On Hiatus</option>
								</select>
							</div>

							<div class="filter-item">
								<label for="translation-status-filter"
									>Translation Status:</label
								>
								<select id="translation-status-filter">
									<option value="all">All</option>
									<option value="Completed">Completed</option>
									<option value="Ongoing">Ongoing</option>
									<option value="Dropped">Dropped</option>
								</select>
							</div>

							<div class="filter-item">
								<label for="status-filter"
									>Reading Status:</label
								>
								<select id="status-filter">
									<option value="all">All</option>
									<option value="plan-to-read">
										Plan to Read
									</option>
									<option value="reading">
										Currently Reading
									</option>
									<option value="completed">Completed</option>
									<option value="on-hold">On Hold</option>
									<option value="dropped">Dropped</option>
									<option value="re-reading">
										Re-reading
									</option>
								</select>
							</div>

							<div class="filter-item">
								<label for="language-filter">Language:</label>
								<select id="language-filter">
									<option value="all">All Languages</option>
								</select>
							</div>

							<div class="filter-item">
								<label>Genres:</label>
								<div class="multi-dropdown">
									<button type="button" class="multi-dropdown-toggle" id="genres-dropdown-toggle">Choose Genres</button>
									<div class="multi-dropdown-panel" id="genres-dropdown-panel">
										<div class="filter-pill-list" id="genres-filter"></div>
									</div>
								</div>
							</div>

							<div class="filter-item">
								<label>Tags:</label>
								<div class="multi-dropdown">
									<div class="tag-match-row">
										<label for="tags-match-mode" class="tag-match-label">Match:</label>
										<select id="tags-match-mode" class="tag-match-select">
											<option value="any">Any tag (OR)</option>
											<option value="all">All tags (AND)</option>
										</select>
									</div>
									<button type="button" class="multi-dropdown-toggle" id="tags-dropdown-toggle">Choose Tags</button>
									<div class="multi-dropdown-panel" id="tags-dropdown-panel">
										<div class="filter-pill-list" id="tags-filter"></div>
									</div>
								</div>
							</div>

							<div class="filter-item full-width">
								<label>Word Count Range:</label>
								<div class="wordcount-row">
									<input
										type="number"
										id="wordcount-min"
										placeholder="Min"
										min="0"
									/>
									<span class="range-separator">to</span>
									<input
										type="number"
										id="wordcount-max"
										placeholder="Max"
										min="0"
									/>
								</div>
								<p class="filter-hint">
									Leave blank for no limit
								</p>
							</div>

							<div class="filter-item full-width">
								<button
									class="clear-filters-btn"
									id="clear-filters-btn"
								>
									Clear All Filters
								</button>
							</div>
						</div>
					</div>
				</div>

				<div class="search-bar-container search-right">
					<input
						type="text"
						id="search-input"
						class="search-bar"
						placeholder="ğŸ” Search by title or author..."
					/>
				</div>
			</div>

			<!-- Category Navigation -->
			<div
				class="category-section"
				id="category-section"
				style="display: none"
			>
				<div class="category-header">
					<h3 id="category-title">Browse Novels</h3>
					<button
						id="back-to-all"
						class="back-btn"
						style="display: none"
					>
						â† Back to All
					</button>
				</div>
				<div class="category-grid" id="category-grid"></div>
			</div>

			<!-- Loading State -->
			<div class="loading-state" id="loading-state">
				<div class="loading-spinner"></div>
				<p>Loading novels...</p>
			</div>

			<!-- Empty State -->
			<div class="empty-state" id="empty-state" style="display: none">
				<span class="empty-icon">ğŸ“š</span>
				<h2>No novels from Ranobes yet!</h2>
				<p>
					Visit a chapter on
					<a href="https://ranobes.top" target="_blank"
						>ranobes.top</a
					>
					to add novels to your library
				</p>
			</div>

			<!-- Novel Grid -->
			<div class="novel-grid" id="novel-grid" style="display: none"></div>
		</div>

		<!-- Novel Detail Modal -->
		<div class="modal" id="novel-modal" style="display: none">
			<div class="modal-backdrop" id="modal-backdrop"></div>
			<div class="modal-content">
				<div class="modal-header">
					<div class="modal-title-section">
						<img
							id="modal-cover"
							src=""
							alt="Cover"
							class="modal-cover-img"
						/>
						<div class="modal-header-text">
							<h2 id="modal-title"></h2>
							by <p id="modal-author"></p>
							<p id="modal-description"></p>
						</div>
					</div>
					<button class="modal-close" id="modal-close-btn">
						&times;
					</button>
				</div>
				<div class="modal-body">
					<div id="modal-metadata-container"></div>
				</div>
				<div class="modal-footer">
					<div class="modal-status-section">
						<div class="status-label">Reading Status:</div>
						<div class="status-buttons">
							<button class="status-btn" data-status="plan-to-read" title="Plan to Read">ğŸ“‹ To Read</button>
							<button class="status-btn" data-status="reading" title="Currently Reading">ğŸ“– Reading</button>
							<button class="status-btn" data-status="completed" title="Completed">âœ… Completed</button>
							<button class="status-btn" data-status="on-hold" title="On Hold">â¸ï¸ On Hold</button>
							<button class="status-btn" data-status="dropped" title="Dropped">âŒ Dropped</button>
							<button class="status-btn" data-status="rereading" title="Re-reading">ğŸ” Re-reading</button>
						</div>
					</div>
					<div class="modal-actions-divider"></div>
					<div class="modal-actions-primary">
						<a id="modal-continue-btn" class="btn btn-primary" target="_blank">Continue Reading</a>
						<a id="modal-read-btn" class="btn btn-secondary" target="_blank">View on Ranobes</a>
					</div>
					<div class="modal-actions-secondary">
						<button id="modal-refresh-btn" class="btn btn-icon" title="Refresh metadata from source">
							ğŸ”„ Update
						</button>
						<button id="modal-edit-btn" class="btn btn-icon" title="Edit novel details">
							âœï¸ Edit
						</button>
						<button id="modal-remove-btn" class="btn btn-icon btn-danger" title="Remove from library">
							ğŸ—‘ï¸ Remove
						</button>
					</div>
				</div>
			</div>
		</div>

		<script src="../../../lib/browser-polyfill.min.js"></script>
		<script type="module" src="./shelf-page.js"></script>
	</body>
</html>
